# Network Pivoting through Tunneling and Port Forwarding

## Using SSH

If SSH is enabled and 'TcpPortForwarding' allowed, it's easy and quick to setup port forwarding tunnels, you just have to choose the right method to your needs. If you have a SSH client and no active server/daemon, reverse is probably the way to go.

Useful SSH client options:

```
# Run as background job
-f

# Do not send any remote commands
-N
```

You can use several '-L' or '-R' options in the same tunnel to make several port forwards.

**Local Port Forwarding**

*Make my local port of choice point to this target and port, that is accessible on the other end of this tunnel(server end of tunnel).*

- This might be the case if you have SSH access **to** your target or pivoting point.

```
ssh -L LOCAL_PORT:TARGET_IP:TARGET_PORT USER@TUNNEL_TARGET
ssh -L 8080:localhost:80 user@192.168.1.1
ssh -L 8080:80 user@192.168.1.1
ssh -L 8080:intraserver.com:443 user@gatewayserver.com
```

**Remote Port Forwarding**

*Make this port on the server I'm connecting to, point to this target and port that it can access through the tunnel I'm creating(client end of tunnel).*

- This might be the case if you can connect **from** your target/pivoting point back to your host/attack server.

```
ssh -R SERVER_PORT:TARGET_IP:TARGET_PORT USER@SERVER_IP
ssh -R 8080:localhost:80 kali@kali.com
ssh -R 8080:intraserver.com:80 kali@kali.com
```

**Dynamic Port Forwarding(SOCKS Proxy)**

- Local: *Start a SOCKS proxy server on this local port and tunnel all traffic to that port through this tunnel*
- Remote/reverse: *Make this port on the server I'm connecting to, act as a SOCKS proxy back to my(client-side) network.*

```
# Local
ssh -D 9050 user@target.com

# Remote
ssh -R 9050 kali@kali.com
```

The remote option is available since SSH 7.6 client. If this is not available, start a local SOCKS proxy and then point a remote port forward to the proxy port.

**TUN/TAP**

*"Poor mans VPN"*

```
```

**X tunneling**

```
```

## Proxychains

## Plink
