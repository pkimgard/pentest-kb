# NFS and RPC
Network File System

Ports: 2049(nfsd) and 111(rpcbind, portmapper). For v4 only 2049 is neccessary.
## Local
- https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/storage_administration_guide/s2-nfs-methodology-portmap

```
# View registered services locally
rpcinfo -p
```

## Nmap
```
# rpcinfo
# View services registered with rpcbind
nmap -sV -p 111 --script=rpcinfo $ip
```

Optional
| Name | Used for |
| - | - |
| nfs-ls |  |
| nfs-statfs |   |
| nfs-showmount |   |

## Mounting, permissions
Like a standard mount:

```
sudo mount [targetip]://home/username

# Use nolock on older NFS servers, servers not supporting NLM or when mounting /var
# (man nfs)
sudo mount -nolock [targetip]://home/username
```

### Permissions
Usually the permissions are tied to the UUID, which we can manipulate.

**Add user and change UUID**

Change the UUID in '/etc/passwd'.
```
sudo adduser mynewuser
sed -i -e 's/[current_uid]/[new_uid]/g' /etc/passwd
```

### Other
```
# Show exports with showmount
showmount -e [targetip]
