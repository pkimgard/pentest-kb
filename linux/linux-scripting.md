# Linux scripting

### Debugging scripts

Add '-x' when starting bash or in shebang of script to view more debugging info.

### Generating numbers

`echo {1..100} | tr ' ' '\n' > numbers.txt`

Generate numbers.txt containing the numbers 1-100, with a line break after each.

### Base conversion

```
(2#BYTE) # Will translate, if you press enter it will run as command.
echo "$((2#BYTE))" # To just print
echo "$((2#00000011))" # Will echo 3
```

Replace the 2# with any other base between 2 and 36.

### Check if file or folder exists

Works in both bash and zsh.
```bash
if [ -d *foldername* ]
then
  echo 'exists'
else
  echo 'not found'
fi

if [ -f *filename* ]
then
  echo 'exists'
else
  echo 'not found'
fi
```

### User input for scripts

Zsh
```zsh
vared -p 'Please input ' -c *variable-name*
```

Bash
```bash
read *variable-name* {*var2* *var3*}
read -p 'Prompt for input: ' *variable-name*
read -sp 'Prompt for input but silent: ' *variable-name*
```

### Redirection
```bash
| # stdout to stdin
|& # stdout and stderr to stdin
2>&1 # stderr to same as stdout
< # stdin to
> # stdout to
2> # stderr to
& # Place at end, run in background
```

### Comparisons

Square brackets in a if/else statement are a reference to the 'test' command. To view availabe functions and operators, see the man page.

![test-command](assets/markdown-img-paste-20211207151228260.png)

When used to combine several commands, boolean operators AND and OR executes based on the previous command exit code(0=True, 1=False) and are opposite to one another:

![boolean-op](assets/markdown-img-paste-20211207151745478.png)

When used in comparisons/statements, they act as expected.

### Double paranthesis construct

  - https://tldp.org/LDP/abs/html/dblparens.html

**Base conversion to decimal:**

```bash
echo $((2#01010101))
echo $((16#5fae))
```

**Arithmetic ops:**

```bash
((counter++))
```

### Functions

- The function must appear above the call to the function itself.
- You don't have to define arguments in the paranthesis in format 2, bash takes all arguments regardless.
- Bash functions dosen't return values, it return exit codes(with 'return').
*Format 1*

```bash
function NaMe {
  # Code here
}
```

*Format 2*

```bash
NaMe () {
  # Code here
}
```

### Variable Scope

- Variable are by default global, if you want to set a local, prepend 'local'.
