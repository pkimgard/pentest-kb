# SMB and NetBIOS
- [Wikipedia](https://en.wikipedia.org/wiki/Server_Message_Block)

Server message block, protocol for sharing files, printers, ports - primarily for Windows.

![smb-ports](assets/markdown-img-paste-20210826143001995.png)
## 139, NetBIOS
### (netbios) nbtscan
Scans netbios over tcp.
```
# Ask for names
nbtscan -r IP_NETWORK
```

### rpcclient
```
# Connection
rpcclient [targetip]
rpcclient -U '' [targetip]

# Commands
enumdomusers
```

Also check out nmap script rpcinfo if rpc is enabled.
## 445, SMB
### smbclient
smbclient
Part of the SAMBA suite. FTP-like interface.

```
# Usage
smbclient //[targetip]/share
smbclient -U username //targetip/share # Connect as user

# Basic anonymous enumeration
smbclient -L [targetip] # Basic list
smbclient -N -L [targetip] # List with no pass

smbclient -N //[target]/[share] # Connect with no pass
smbclient -U '' -N //[target]//[share] # Null auth
```

### smbget
Retrieve files.
```
smgbet -R smb://[targetip]/share # Download folder and all contents.
```

### nmap
Runs with default script
| Name | Used for |
| - | - |
| smb-os-discovery |   |
| smb-security-mode |   |
| smb2-security-mode |   |
| smb2-time |   |

Optional
| Name | Used for |
| - | - |
| smb-enum-shares |  |
| smb-enum-users |   |

### linux4enum
```
enum4linux $ip # Basic enumeration
enum4linux -a $ip # All simple enumeration
```
